# 07 | 데이터 암호화
- MySQL 8.0 : 데이터 파일, 리두 로그, 언두 로그, 복제를 위한 바이너리 로그등 모두 암호화 기능 제공
- 응용 프로그램 아호화 : 주로 중요 정보를 가진 컬럼 단위 암호화
- 데이터베이스 수준 암호화 : 테이블 단위로 암호화
## 7.1 MySQL 서버 데이터 암호화
- MySQL서버(InnoDB 스토리지 엔진)의 I/O 레이어에서만 데이터 암호화 및 복호화 과정 실행
  - 사용자 입장에서는 아무 차이를 못느낌
  - 이런 암호화 방식 : TDE(Transparent Data Encryption)
### 7.1.1 2단계(2-Tier) 키 관리
- TDE에서 암호화 키는 키링(keyRing) 플러그인에 의해 관리
- 마스터 키
  - HashiCorp Vault 같은 외부 키 관리 솔루션(KMS, Key Management Service) 
  - 디스크 파일(keyring_file ro keyring_encrypted_file) 에서 가져옴
- 테이블스페이스 키
  - 암호화된 테이블이 생성될 떄마다 해당 테이블을 위한 임의의 테이블 스페이스 키 발급 
  - 각 테이블의 데이터 파일 헤더에 저장
  - 테이블이 삭제되지 않으면 변경되지 않음 (마스터 키가 바뀌면 테이블 스페이스키도 기존 마스터키로 복호화했다가 새로 다시 암호화)
- 암호화 알고리즘
  - TDE 지원 암호화 알고리즘 : AES 256
  - 테이블스페이스 키 : AES-256 ECB(Electronic CodeBook) 알고리즘
  - 데이터 파일 : AES-256 CBC(Cipher Block Chaining) 알고리즘 활용해 암호화 진행
### 7.1.3 암호화와 복제
- TDE를 사용해 암호화하는 경우 마스터 키와 테이블스페이스 키는 소스 서버와 레플리카 서버간 복제되지 않는다.

## 7.3 테이블 암호화
### 7.3.2 응용프로그램 암호화와의 비교
- 응용프로그램으로 암호화된 컬럼은 인덱스가 있더라도 100% 활용이 안된다.

## 7.4 언두 로그 및 리두 로그 암호화
- 테이블 암호화를 하더라도 해당 로그 데이터는 모두 평문 저장이됨.
- 별도 암호화 필요

## 7.5. 바이너리 로그 암호화
### 7.5.1. 바이너리 로그 암호화 키 관리
- 피일 키로 암호화 해서 디스크로 저장
- 파일 키는 '바이너리 로그 암호화 키'로 암호화해서 각 바이너리, 릴레이 로그 파일의 헤더에 저장